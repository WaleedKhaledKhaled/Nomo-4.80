@model ProductDetailsModel
@inject Nop.Core.IWorkContext workContext
@{
    var supportRtl = (await workContext.GetWorkingLanguageAsync()).Rtl;
    NopHtml.AddScriptParts(ResourceLocation.Footer, "/lib_npm/magnific-popup/jquery.magnific-popup.min.js");
    NopHtml.AddCssFileParts("/lib_npm/magnific-popup/magnific-popup.css");
}



<div class="gallery" data-popup="#dialogForImgPopUp">
    <div class="picture">
        @await Component.InvokeAsync(typeof(WidgetViewComponent), new { widgetZone = PublicWidgetZones.ProductDetailsBeforePictures, additionalData = Model })
        @if (Model.DefaultPictureZoomEnabled)
        {
            if (Model.PictureModels.Count == 1)
            {
                <a href="@Model.DefaultPictureModel.FullSizeImageUrl" title="@Model.DefaultPictureModel.Title" id="main-product-img-lightbox-anchor-@Model.Id">
                    <img alt="@Model.DefaultPictureModel.AlternateText" src="@Model.DefaultPictureModel.ImageUrl" title="@Model.DefaultPictureModel.Title" id="main-product-img-@Model.Id" />
                </a>
                <script asp-location="Footer">
                $(document).ready(function() {
                    $('#main-product-img-lightbox-anchor-@Model.Id').magnificPopup({ type: 'image' });
                });
                </script>
            }

            else if (Model.PictureModels.Count > 1)
            {
                <div class="owl-carousel picture-details-carousel">
                    @foreach (var picture in Model.PictureModels)
                    {
                        <div class="item picture-thumbs">
                            <a class="thumb-item" href="@picture.FullSizeImageUrl" alt="@picture.AlternateText" title="@picture.Title">
                                <img alt="@picture.AlternateText" src="@picture.ImageUrl" title="@picture.Title" style="border-width: 0px;" />
                            </a>
                        </div>
                    }
                </div>
                <script asp-location="Footer">
                    $(document).ready(function () {
                        $('.picture-thumbs').magnificPopup(
                            {
                                type: 'image',
                                delegate: 'a',
                                removalDelay: 300,
                                gallery: {
                                    enabled: true,
                                    navigateByImgClick: true,
                                    preload: [0, 1],
                                    tPrev: '@T("Media.MagnificPopup.Previous")',
                                    tNext: '@T("Media.MagnificPopup.Next")',
                                    tCounter: '@T("Media.MagnificPopup.Counter")'
                                },
                                tClose: '@T("Media.MagnificPopup.Close")',
                                tLoading: '@T("Media.MagnificPopup.Loading")'
                            });
                    });

                </script>
                <script asp-location="Footer">
                    $(document).ready(function () {
                        $('.thumb-item > img').on('click',
                            function () {
                                $('#main-product-img-@Model.Id').attr('src', $(this).attr('data-defaultsize'));
                                $('#main-product-img-@Model.Id').attr('title', $(this).attr('title'));
                                $('#main-product-img-@Model.Id').attr('alt', $(this).attr('alt'));
                                $('#main-product-img-lightbox-anchor-@Model.Id').attr('href', $(this).attr('data-fullsize'));
                                $('#main-product-img-lightbox-anchor-@Model.Id').attr('title', $(this).attr('title'));
                            });
                    });
                </script>

            }
        }


        else
        {
            if (Model.PictureModels.Count == 1)
            {
                <img alt="@Model.DefaultPictureModel.AlternateText" src="@Model.DefaultPictureModel.ImageUrl" title="@Model.DefaultPictureModel.Title" id="main-product-img-@Model.Id" />
            }

            else if (Model.PictureModels.Count > 1)
            {
                <div class="owl-carousel picture-details-carousel">
                    @foreach (var picture in Model.PictureModels)
                    {
                        <div class="item">
                            <img alt="@picture.AlternateText" src="@picture.ImageUrl" title="@picture.Title" style="border-width: 0px;" />
                        </div>
                    }
                </div>

            }
        }
    </div>

    <script type="text/javascript" asp-location="Footer">
        $(document).ready(function () {
            $('.picture-details-carousel').owlCarousel({
                nav: true, // Show next and prev buttons
                items: 1,
                responsiveBaseElement: 'body',
                margin: 10,
                dots: true,
                rtl: @supportRtl.ToString().ToLower(),
                loop: true,
                autoplay: true,
                autoplayTimeout: 5000,
                autoplayHoverPause: true
            });
        });
    </script>
    @await Component.InvokeAsync(typeof(WidgetViewComponent), new { widgetZone = PublicWidgetZones.ProductDetailsAfterPictures, additionalData = Model })
</div>