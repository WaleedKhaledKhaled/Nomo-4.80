@using System.Globalization

@{
    var settings = EngineContext.Current.Resolve<PictureZoomSettings>();
    var position = "inside";

    <script asp-location="@ResourceLocation.Footer"  src="~/Plugins/NopStation.Plugin.Widgets.PictureZoom/Contents/js/jquery.imagesloaded.js"></script>
    <script asp-location="@ResourceLocation.Footer"  src="~/Plugins/NopStation.Plugin.Widgets.PictureZoom/Contents/js/cloud-zoom.1.0.2.js"></script>
    <link rel="stylesheet" href="~/Plugins/NopStation.Plugin.Widgets.PictureZoom/Contents/css/cloud-zoom.css" />
    <link rel="stylesheet" href="~/Plugins/NopStation.Plugin.Widgets.PictureZoom/Contents/css/styles.css"/>

    System.Globalization.CultureInfo.DefaultThreadCurrentUICulture = new System.Globalization.CultureInfo("en-US");
}

<script type="text/javascript" asp-location="Footer">
    var position = '@position';
    var cloudZoom = function (position) {
        $("a.cloud-zoom").imagesLoaded({
            done: function ($images) {
                var width = $(".cloud-zoom-image-size").width() * @settings.ZoomWidth;
                var height = $(".cloud-zoom-image-size").height() * @settings.ZoomHeight;
                $('.cloud-zoom').CloudZoom({
                    zoomWidth: width,
                    zoomHeight: height,
                    position: position,
                    tint: @settings.Tint.ToString().ToLower(),
                    tintOpacity: @settings.TintOpacity.ToString("N2", new CultureInfo("en-US")),
                    lensOpacity: @settings.LensOpacity.ToString("N2", new CultureInfo("en-US")),
                    softFocus: @settings.SoftFocus.ToString().ToLower(),
                    smoothMove: @settings.SmoothMove,
                    showTitle: @settings.ShowTitle.ToString().ToLower(),
                    titleOpacity: @settings.TitleOpacity.ToString("N2", new CultureInfo("en-US")),
                    adjustX: @settings.AdjustX,
                    adjustY: @settings.AdjustY,
                });
            }
        });
    }

    var initZoom = function () {
            cloudZoom('inside');
    };
</script>